import"./jquery.fine-uploader-fd227c56.js";if(typeof jQuery>"u")throw new Error("Requires jQuery");+function(e){const r=e("meta[name=_token]").attr("content"),i=e("meta[name=_base_url]").attr("content");let n=e("#btn_image_uploader"),p=function(){n.prop("disabled")||(e('input[name="qqfile"]').addClass("disabled").attr("disabled","disabled"),n.addClass("disabled").attr("disabled","disabled").before('<i class="glyphicon glyphicon-refresh glyphicon-spin save-spinner"></i> '))},m=function(){n.prop("disabled")&&(e(".save-spinner").remove(),e('input[name="qqfile"]').removeClass("disabled").removeAttribute("disabled"),n.removeClass("disabled").removeAttribute("disabled"))},d=e("#image_uploader").fineUploader({template:"upload-template",thumbnails:{placeholders:{waitingPath:i+"/images/waiting-generic.png",notAvailablePath:i+"/images/not_available-generic.png"}},request:{endpoint:i+"/my/image/upload",params:{_token:r}},editFilename:{enabled:!1},retry:{enableAuto:!1},chunking:{enabled:!1},deleteFile:{enabled:!0,method:"DELETE",endpoint:i+"/my/image/delete",params:{_token:r}},autoUpload:!1,validation:{allowedExtensions:["jpeg","jpg","gif","png"],sizeLimit:67108864},callbacks:{onError:function(t,o,l){d.fineUploader("getItemByFileId",t).find(".upload-error").removeClass("hidden").find(".error-msg").text("Error: "+l),m()},onUpload:function(t,o){p()},onComplete:function(t,o,l){if(l.success){let a=l.imageId;d.fineUploader("getItemByFileId",t).find(".uploaded-file").html('<input name="images[]" type="hidden" value="'+a+'">'),d.fineUploader("setUuid",t,a)}else m()},onAllComplete:function(t,o){t.length>0&&e("#form_upload").submit()}}});n.click(function(t){d.fineUploader("uploadStoredFiles"),t.preventDefault()}),e(".btn_delete_album, .btn_delete_image").click(function(t){let o=e(this).data("album-id"),l=e(this).data("image-id"),a="Album",u=o;isNaN(l)||(a="Image",u=l),swal({title:"Delete this "+a+"?",text:"Are you sure, you want to delete this "+a+"?",type:"warning",showCancelButton:!0,confirmButtonText:"Delete",cancelButtonText:"Cancel",confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",allowOutsideClick:!1,showLoaderOnConfirm:!0,preConfirm:function(){return new Promise(function(f,c){return e.ajax({url:i+"/my/image/delete",type:"DELETE",data:{_token:r,action:a,id:u},dataType:"json"}).done(function(s){f()}).fail(function(s){c("Error: "+(s.responseJSON?s.responseJSON:s.statusText))})})}}).then(function(){swal(a+" Deleted!",a+" deleted successfully.","success")},function(){swal.resetDefaults()}),t.preventDefault()})}(jQuery);
